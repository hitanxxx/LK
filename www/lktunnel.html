<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
		<title>LK - tunnel</title>
		<link rel="stylesheet" href="css/mainpage.css"/>
		<script src="js/axios.min.js"></script>
		<script src="js/json.js"></script>
	</head>

	<body>
		<div id="glowall" class="glowall">
			<div id="glodec" class="glodec" ></div>
			<div id="header" class="header">
				<div id="header_main_title" class="header_main_title">
				</div>
				<div id="mySidenav" class="sidenav">
				  <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
				  <a href="index.html">home</a>
				  <a href="lktunnel.html">lk-tunnel</a>
				  <a href="lkperf.html">lk-perf</a>
				  <a href="lkweb.html">lk-web</a>
				  <a href="benchmark.html">benchmark</a>
				</div>
				<div id="menu" class="menu">
				<span style="font-size:30px;cursor:pointer" onclick="openNav()">&#9776; open</span>
				</div>
				
			</div>
			<div id="content" class="content">
				<div id="content_text" class="content_text">
				<h1>LK - TUNNEL</h1>
				<h1>lk tunnel 是什么</h1>
				<p>lk tunnel 作为lk的一个模块。
				功能是代理http以及https。除了
				能以基本的代理模式工作之外，
				他还能够支持tunnel模式。当以
				tunnel模式工作的时候，需要两
				个lk tunnel同时工作。一个作为
				client，一个作为server。他们之
				间使用https来进行通信。</p>

				<h1>lk tunnel 的特点</h1>
				<ul><li>lk tunnel 是一个http层
				级的proxy或者tunnel，所以它只
				能够处理http/https请求。</li>
				<li>lk tunnel 本身是 lk的一个
				模快。而lk出了 lk tunnel之外，
				还有lk web以及 lk perf。这两者
				都要求有很好的性能。所以lk 
				tunnel的性能也不错。但是目前
				tunnel模式下client与server使用
				无状态的https协议，所以在大量
				频繁的连接到来的时候。会频繁
				的建立https连接。这可能会消耗
				相当一部分的性能。
				</li>
				<li>lk tunnel 没有强制性的缓存
				，但是可以理解成有缓冲。它是
				即收即发的。</li></ul>

				<h1>lk tunnel 的使用</h1>
				<p>我把 lk tunnel 做成了模块，
				虽然它跟 lk web ， lk perf 
				没有依赖关系，但是为了方便，
				简单，他们编译在一起。在配置
				文件中 lk tunnel的配置相对来
				说是比较独立的。
				<pre>
	&quot;tunnel&quot;:{
		&quot;mode&quot;:&quot;single&quot;
	}
				</pre>
				在配置文件中，以这样的块来指定。
				当mode为single，即工作在单纯的
				代理模式下。开启7325端口，为了
				方便以及配置简单，没有开放端口
				配置。
				当mode为client时，则工作在tunnel
				模式的client模式下，开启7325端口
				。这时候需要server配置工作，需要
				指定一个server的ip地址。
				<pre>
	&quot;tunnel&quot;:{
		&quot;mode&quot;:&quot;client&quot;,
		&quot;server&quot;:&quot;1.1.1.1&quot;
	}
				</pre>
				当mode为server时，工作在tunnel模
				式的server模式下，开启7324端口。
				<pre>
	&quot;tunnel&quot;:{
		&quot;mode&quot;:&quot;server&quot;
	}
				</pre>
				需要注意的是，因为涉及到https，
				所以需要crt以及key文件。当前版本
				中，配置文件中crt以及key文件为全局
				的。所以用的时候需要注意crt配置和
				key配置的依赖关系。</p>
				</div>
				<div id="footer" class="footer" >
				<p>Powered by <a href="https://github.com/hitanxxx/lk">LK</a></p>
				</div>
			</div>	
			
		</div>
	<script>
	function openNav() {
		document.getElementById("mySidenav").style.width = "200px";
	}

	function closeNav() {
		document.getElementById("mySidenav").style.width = "0";
	}
	</script>
	</body>
</html>