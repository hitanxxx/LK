<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
		<title>LK - benchmark</title>
		<link rel="stylesheet" href="css/mainpage.css"/>
		<script src="js/axios.min.js"></script>
		<script src="js/json.js"></script>
	</head>

	<body>
		<div id="glowall" class="glowall">
			<div id="glodec" class="glodec" ></div>
			<div id="header" class="header">
				<div id="header_main_title" class="header_main_title">
				</div>
				<div id="mySidenav" class="sidenav">
				  <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
				  <a href="index.html">home</a>
				  <a href="lktunnel.html">lk-tunnel</a>
				  <a href="lkperf.html">lk-perf</a>
				  <a href="lkweb.html">lk-web</a>
				  <a href="benchmark.html">benchmark</a>
				</div>
				<div id="menu" class="menu">
				<span style="font-size:30px;cursor:pointer" onclick="openNav()">&#9776; open</span>
				</div>
				
			</div>
			<div id="content" class="content">
				<div id="content_text" class="content_text">
				<h1>Benchmark</h1>
				<h2 id="lkperfvsapachebenchmark">lk perf vs apache benchmark</h2>

<p>宿主环境为 i5 8400 3.8Ghz, 网络为千兆以太，测试均为http，connection close短连接。</p>

<h3 id="">单核心</h3>

<ul>
<li>lk perf 虚拟机 1核心，1gb内存 </li>

<li>ab 虚拟机 1核心，1gb内存</li>

<li>被测试的是nginx 1.14，虚拟机 1核心，1gb内存，1进程。</li>
</ul>

<p><code><pre>
|    object  |   进程 | 并发设置 | 时间     |  test1    |  test2   |   test3     |  cpu      |
|------------|--------|----------|-----------|-----------|---------|-------------|-----------|
|    lk perf |   1    | 30       |   10s     |70679      |70637    |70580        |   99      |
|    ab      |   /    |  1000    |   10s     |72251      |71711    |72433        |   99      |
</p></code></pre>

<h3 id="-1">双核心</h3>

<ul>
<li>lk perf 虚拟机 2核心，1gb内存</li>

<li>ab虚拟机 2核心，1gb内存</li>

<li>被测试的nginx-1.14，虚拟机 2核心，1gb内存，2进程。</li>
</ul>

<p><code><pre>
|    object   |   进程  | 并发设置 | 时间      |  test1           |test2              |   test3    	|  cpu     |
|-------------|---------|----------|-----------|-------------------|-------------------|----------------|----------|
|    lk perf  |   2     | 30       |   10s     |194177             |195576             |195954          |  97-96   |
|    ab       |   /     |  3000    |   10s     |181247（0failed）  |161376(448failed)  |170303(0failed) |   100    |
</p></code></pre>

<p>双核心数据和单核心的数据比起来，并不是与单核心的数据x2差不多，而是多了不少。这也许正常，也许不正常。我也想知道原因。这也许是由于双核心的情况下吃了比预期更多宿主资源导致的。不过这里想说明的是，不论如何，这些对比始终保持了环境的一致性。从而数据总能体现不同对象在同样环境下的差异。</p>

<h2 id="lkwebvsnginx">lk web vs nginx</h2>

<h3 id="-2">单核心</h3>

<ul>
<li>lk web 虚拟机 1核心，1gb内存</li>

<li>nginx 1.14 虚拟机 1核心 1gb内存</li>

<li>测试工具 lk perf 虚拟机 1核心，1gb内存</li>
</ul>

<p>lk perf 采用 30路并发，10s时间</p>

<p><code><pre>
|     object  |    进程    | 时间      |  test1    |  test2  |   test3    |  cpu     |
| ------------|------------|-----------|-----------|---------|-------------|----------|
|    lk web   |   1        |   10s     |77373      |77037    |77475        |   94     |
|    nginx    |   1        |   10s     |70718      |71082    |70215        |   90     |
</p></code></pre>

<h3 id="-3">双核心</h3>

<ul>
<li>lk web 虚拟机 2核心，1gb内存</li>

<li>nginx 1.14 虚拟机 2核心 1gb内存</li>

<li>测试工具 lk perf 虚拟机 2核心，1gb内存</li>
</ul>

<p>lk perf 采用 30路并发，10s时间</p>

<p><code><pre>
|     object |    进程     | 时间      |  test1    |  test2  |   test3     |  cpu     |
|------------|-------------|-----------|-----------|---------|-------------|-----------|
|    lk web  |   2         |   10s     |194854     |193158   |192333       |   92-92   |
|    nginx   |   2         |   10s     |186471     |185138   |184547       |   95-95   |
</p></code></pre>

<p>需要说明的是，大家都习惯拿nginx作为web服务器性能的比较对象。lk web的作用更多的是为其他模块如 lk perf提供服务。它的功能十分简单，流程也很精简。nginx功能丰富。 这里与nginx的性能对比没有太多实际意义，更多的是为了好玩。</p>
				</div>
				<div id="footer" class="footer" >
				<p>Powered by <a href="https://github.com/hitanxxx/lk">LK</a></p>
				</div>
			</div>	
			
		</div>
	<script>
	function openNav() {
		document.getElementById("mySidenav").style.width = "200px";
	}

	function closeNav() {
		document.getElementById("mySidenav").style.width = "0";
	}
	</script>
	</body>
</html>